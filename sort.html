<html>
	<head>
		<meta charset="utf-8">
		<title>Sort - Ferramentinhas</title>

		<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

		<script type="text/javascript">
			function postponeInvocationUntilQuiescent(fn, ms) {
				var timeout = null;
				return function() {
					timeout && clearTimeout(timeout);

					// capture this and arguments
					var t = this;
					var args = Array.prototype.slice.call(arguments, 0);
					timeout = setTimeout(function() {
						timeout = null;
						fn.apply(t, args);
					}, ms);
				};
			}

			function getCompare(o) {
				var compare = function(a,b) { return a == b ? 0 : a < b ? -1 : 1; };

				if (o.LANG && o.LANG != 'C') {
					var collator = new Intl.Collator(LANG);
					compare = collator.compare;
				}

				if (o.ignoreLeadingBlanks)
					compare = (function(fn) { return function(a,b) {
						return fn(a.replace(/^\s+/,''), b.replace(/^\s+/,''));
					}})(compare);

				if (o.dictionaryOrder)
					compare = (function(fn) { return function(a,b) {
						// keep what collation understands as digits and alpha and whitespace
					}})(compare);

				if (o.ignoreCase)
					compare = (function(fn) { return function(a,b) {
						return fn(a.toUpperCase(), b.toUpperCase());
					}})(compare);

				return compare;
			}

			function sort() {
				$('#stdout').empty();

				var buffer = $('#stdin').val().split('\n');
				if (buffer.slice(-1)[0] == '')
					buffer = buffer.slice(0, -1);

				buffer = buffer.sort(getCompare({
					LANG: $('input[name="LANG"]').val(),
					ignoreLeadingBlanks: $('input[name="ignore-leading-blanks"]').is(':checked'),
					dictionaryOrder: $('input[name="dictionary-order"]').is(':checked'),
					ignoreCase: $('input[name="ignore-case"]').is(':checked'),
					generalNumericSort: $('input[name="general-numeric-sort"]').is(':checked'),
					ignoreNonprinting: $('input[name="ignore-nonprinting"]').is(':checked'),
					monthSort: $('input[name="month-sort"]').is(':checked'),
					humanNumericSort: $('input[name="human-numeric-sort"]').is(':checked'),
					numericSort: $('input[name="numeric-sort"]').is(':checked'),
					randomSort: $('input[name="random-sort"]').is(':checked'),
					reverse: $('input[name="reverse"]').is(':checked'),
					versionSort: $('input[name="version-sort"]').is(':checked')
				}));

				$('#stdout').append(buffer.join('\n'));
			}

			$(function() {
				var sort1 = postponeInvocationUntilQuiescent(sort, 2000);

				$('select, input[type="checkbox"]').change(sort);
				$('#stdin, input[type="text"]').keyup(sort1).on('cut', sort1).on('paste', sort1);

				// sort immediately
				sort();
		});
		</script>
	</head>

	<body>
		<header>
			<label for="LANG">LANG</label> <input type="text" name="LANG">
			<input type="checkbox" name="ignore-leading-blanks"><label for="ignore-leading-blanks">ignore-leading-blanks</label>
			<input type="checkbox" name="dictionary-order"><label for="dictionary-order">dictionary-order</label>
			<input type="checkbox" name="ignore-case"><label for="ignore-case">ignore-case</label>
			<input type="checkbox" name="general-numeric-sort"><label for="general-numeric-sort">general-numeric-sort</label>
			<input type="checkbox" name="ignore-nonprinting"><label for="ignore-nonprinting">ignore-nonprinting</label>
			<input type="checkbox" name="month-sort"><label for="month-sort">month-sort</label>
			<input type="checkbox" name="human-numeric-sort"><label for="human-numeric-sort">human-numeric-sort</label>
			<input type="checkbox" name="numeric-sort"><label for="numeric-sort">numeric-sort</label>
			<input type="checkbox" name="random-sort"><label for="random-sort">random-sort</label>
			<input type="checkbox" name="reverse"><label for="reverse">reverse</label>
			<input type="checkbox" name="version-sort"><label for="version-sort">version-sort</label>
		</header>
		<textarea id="stdin"></textarea>
		<pre id="stdout"></pre>
	</body>
</html>
<!-- 

Usage: sort [OPTION]... [FILE]...
  or:  sort [OPTION]... --files0-from=F
Write sorted concatenation of all FILE(s) to standard output.

Mandatory arguments to long options are mandatory for short options too.
Ordering options:

  -b, --ignore-leading-blanks  ignore leading blanks
  -d, --dictionary-order      consider only blanks and alphanumeric characters
  -f, --ignore-case           fold lower case to upper case characters
  -g, --general-numeric-sort  compare according to general numerical value
  -i, --ignore-nonprinting    consider only printable characters
  -M, --month-sort            compare (unknown) < 'JAN' < ... < 'DEC'
  -h, --human-numeric-sort    compare human readable numbers (e.g., 2K 1G)
  -n, --numeric-sort          compare according to string numerical value
  -R, --random-sort           sort by random hash of keys
      --random-source=FILE    get random bytes from FILE
  -r, --reverse               reverse the result of comparisons
      --sort=WORD             sort according to WORD:
                                general-numeric -g, human-numeric -h, month -M,
                                numeric -n, random -R, version -V
  -V, --version-sort          natural sort of (version) numbers within text

Other options:

      --batch-size=NMERGE   merge at most NMERGE inputs at once;
                            for more use temp files
  -c, --check, --check=diagnose-first  check for sorted input; do not sort
  -C, --check=quiet, --check=silent  like -c, but do not report first bad line
      --compress-program=PROG  compress temporaries with PROG;
                              decompress them with PROG -d
      --debug               annotate the part of the line used to sort,
                              and warn about questionable usage to stderr
      --files0-from=F       read input from the files specified by
                            NUL-terminated names in file F;
                            If F is - then read names from standard input
  -k, --key=KEYDEF          sort via a key; KEYDEF gives location and type
  -m, --merge               merge already sorted files; do not sort
  -o, --output=FILE         write result to FILE instead of standard output
  -s, --stable              stabilize sort by disabling last-resort comparison
  -S, --buffer-size=SIZE    use SIZE for main memory buffer
  -t, --field-separator=SEP  use SEP instead of non-blank to blank transition
  -T, --temporary-directory=DIR  use DIR for temporaries, not $TMPDIR or /tmp;
                              multiple options specify multiple directories
      --parallel=N          change the number of sorts run concurrently to N
  -u, --unique              with -c, check for strict ordering;
                              without -c, output only the first of an equal run
  -z, --zero-terminated     end lines with 0 byte, not newline
      --help     display this help and exit
      --version  output version information and exit

KEYDEF is F[.C][OPTS][,F[.C][OPTS]] for start and stop position, where F is a
field number and C a character position in the field; both are origin 1, and
the stop position defaults to the line's end.  If neither -t nor -b is in
effect, characters in a field are counted from the beginning of the preceding
whitespace.  OPTS is one or more single-letter ordering options [bdfgiMhnRrV],
which override global ordering options for that key.  If no key is given, use
the entire line as the key.

SIZE may be followed by the following multiplicative suffixes:
% 1% of memory, b 1, K 1024 (default), and so on for M, G, T, P, E, Z, Y.

With no FILE, or when FILE is -, read standard input.

*** WARNING ***
The locale specified by the environment affects sort order.
Set LC_ALL=C to get the traditional sort order that uses
native byte values.

Report sort bugs to bug-coreutils@gnu.org
GNU coreutils home page: <http://www.gnu.org/software/coreutils/>
General help using GNU software: <http://www.gnu.org/gethelp/>
For complete documentation, run: info coreutils 'sort invocation'

-->
